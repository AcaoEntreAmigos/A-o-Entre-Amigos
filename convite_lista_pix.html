<!-- ===============================
     MÓDULO 1 – CONVITE
     PASSO 4 – LISTA + PIX (TESTE-OK)
     =============================== -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Convite – Ação entre Amigos</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f5f5f5; padding:20px }
    .box { background:#fff; padding:20px; border-radius:8px; max-width:700px; margin:auto }
    h1,h2 { margin-top:0 }
    ul { padding-left:20px }
    li { margin-bottom:6px }
    input, button { width:100%; padding:10px; margin:6px 0 }
    button { background:#25D366; color:#fff; border:none; border-radius:5px; cursor:pointer }
  </style>
</head>
<body>
<div class="box">
  <h1>Ação entre Amigos</h1>

  <!-- ===============================
       REGRAS / NORMAS (RESUMO)
       =============================== -->
  <p>Leia atentamente antes de prosseguir:</p>
  <ul>
    <li>É necessário realizar 5 pagamentos PIX.</li>
    <li>Cada pagamento corresponde a uma posição da lista.</li>
    <li>Após os pagamentos, envie os comprovantes ao convidador.</li>
  </ul>

  <!-- ===============================
       LISTA DO CONVIDADOR
       =============================== -->
  <h2>Lista de quem te convidou</h2>
  <ul id="listaPix"></ul>

  <!-- ===============================
       DADOS DO CONVIDADO
       =============================== -->
  <h2>Seus dados</h2>
  <input id="nomeConvidado" placeholder="Seu nome completo">
  <input id="telefoneConvidado" placeholder="(xx) xxxxx-xxxx" oninput="formatarTelefone(this)">

  <button onclick="enviarWhatsApp()">Enviar comprovantes pelo WhatsApp</button>
</div>

<script>
// ===============================
// SIMULAÇÃO DE DADOS (TESTE-OK)
// ===============================
const listaConvidador = [
  { nome: "Bruno", pix: "111.111.111-11" },
  { nome: "Carlos", pix: "222.222.222-22" },
  { nome: "João", pix: "333.333.333-33" },
  { nome: "Marcos", pix: "444.444.444-44" },
  { nome: "Ana", pix: "555.555.555-55" }
];

// ===============================
// PARAMETROS DO LINK
// ===============================
const params = new URLSearchParams(window.location.search);
const idConvidador = params.get("id");
const telefoneConvidador = params.get("tel");

// ===============================
// EXIBE LISTA
// ===============================
const ul = document.getElementById("listaPix");
listaConvidador.forEach((p, i) => {
  const li = document.createElement("li");
  li.textContent = `${i + 1}º - ${p.nome} | PIX: ${p.pix}`;
  ul.appendChild(li);
});

// ===============================
// FORMATAÇÃO TELEFONE
// ===============================
function formatarTelefone(campo) {
  let v = campo.value.replace(/\D/g, "");
  if (v.length > 11) v = v.slice(0, 11);
  if (v.length > 6)
    v = `(${v.slice(0,2)}) ${v.slice(2,7)}-${v.slice(7)}`;
  else if (v.length > 2)
    v = `(${v.slice(0,2)}) ${v.slice(2)}`;
  campo.value = v;
}

// ===============================
// ENVIO WHATSAPP
// ===============================
function enviarWhatsApp() {
  const nome = document.getElementById("nomeConvidado").value.trim();
  const tel = document.getElementById("telefoneConvidado").value.trim();

  if (!nome || !tel) {
    alert("Preencha seus dados");
    return;
  }

  const mensagem = `Olá!\n\nSou *${nome}*.\nJá realizei os 5 pagamentos PIX conforme a lista.\n\nFavor inserir meu nome em sua Lista de Contatos.\n\nObrigado(a)!`;

  const telLimpo = telefoneConvidador.replace(/\D/g, "");
  const url = `https://wa.me/55${telLimpo}?text=${encodeURIComponent(mensagem)}`;
  window.open(url, "_blank");
}
</script>
</body>
</html>
